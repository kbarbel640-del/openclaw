---
summary: "Signierschritte für macOS-Debug-Builds, die von Packaging-Skripten erzeugt werden"
read_when:
  - Erstellen oder Signieren von macOS-Debug-Builds
title: "macOS-Signierung"
x-i18n:
  source_path: platforms/mac/signing.md
  source_hash: 403b92f9a0ecdb7c
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T07:05:06Z
---

# mac-Signierung (Debug-Builds)

Diese App wird üblicherweise aus [`scripts/package-mac-app.sh`](https://github.com/openclaw/openclaw/blob/main/scripts/package-mac-app.sh) gebaut, das inzwischen:

- eine stabile Debug-Bundle-ID setzt: `ai.openclaw.mac.debug`
- die Info.plist mit dieser Bundle-ID schreibt (Override über `BUNDLE_ID=...`)
- [`scripts/codesign-mac-app.sh`](https://github.com/openclaw/openclaw/blob/main/scripts/codesign-mac-app.sh) aufruft, um das Haupt-Binary und das App-Bundle zu signieren, sodass macOS jeden Neuaufbau als dasselbe signierte Bundle behandelt und TCC-Berechtigungen (Benachrichtigungen, Bedienungshilfen, Bildschirmaufnahme, Mikrofon, Sprache) beibehält. Für stabile Berechtigungen verwenden Sie eine echte Signaturidentität; Ad-hoc ist optional und fragil (siehe [macOS-Berechtigungen](/platforms/mac/permissions)).
- standardmäßig `CODESIGN_TIMESTAMP=auto` verwendet; dies aktiviert vertrauenswürdige Zeitstempel für Developer-ID-Signaturen. Setzen Sie `CODESIGN_TIMESTAMP=off`, um das Zeitstempeln zu überspringen (Offline-Debug-Builds).
- Build-Metadaten in die Info.plist injiziert: `OpenClawBuildTimestamp` (UTC) und `OpenClawGitCommit` (kurzer Hash), damit der „About“-Bereich Build-, Git- sowie Debug-/Release-Kanal anzeigen kann.
- **Packaging erfordert Node 22+**: Das Skript führt TS-Builds und den Build der Control UI aus.
- `SIGN_IDENTITY` aus der Umgebung liest. Fügen Sie `export SIGN_IDENTITY="Apple Development: Your Name (TEAMID)"` (oder Ihr Developer-ID-Application-Zertifikat) zu Ihrer Shell-RC hinzu, um immer mit Ihrem Zertifikat zu signieren. Ad-hoc-Signierung erfordert ein explizites Opt-in über `ALLOW_ADHOC_SIGNING=1` oder `SIGN_IDENTITY="-"` (nicht empfohlen für das Testen von Berechtigungen).
- nach dem Signieren eine Team-ID-Prüfung ausführt und fehlschlägt, wenn ein Mach-O innerhalb des App-Bundles von einer anderen Team-ID signiert ist. Setzen Sie `SKIP_TEAM_ID_CHECK=1`, um dies zu umgehen.

## Verwendung

```bash
# from repo root
scripts/package-mac-app.sh               # auto-selects identity; errors if none found
SIGN_IDENTITY="Developer ID Application: Your Name" scripts/package-mac-app.sh   # real cert
ALLOW_ADHOC_SIGNING=1 scripts/package-mac-app.sh    # ad-hoc (permissions will not stick)
SIGN_IDENTITY="-" scripts/package-mac-app.sh        # explicit ad-hoc (same caveat)
DISABLE_LIBRARY_VALIDATION=1 scripts/package-mac-app.sh   # dev-only Sparkle Team ID mismatch workaround
```

### Hinweis zur Ad-hoc-Signierung

Beim Signieren mit `SIGN_IDENTITY="-"` (Ad-hoc) deaktiviert das Skript automatisch die **Hardened Runtime** (`--options runtime`). Dies ist erforderlich, um Abstürze zu verhindern, wenn die App versucht, eingebettete Frameworks (wie Sparkle) zu laden, die nicht dieselbe Team-ID teilen. Ad-hoc-Signaturen brechen außerdem die Persistenz von TCC-Berechtigungen; siehe [macOS-Berechtigungen](/platforms/mac/permissions) für Wiederherstellungsschritte.

## Build-Metadaten für About

`package-mac-app.sh` versieht das Bundle mit:

- `OpenClawBuildTimestamp`: ISO8601 UTC zum Packaging-Zeitpunkt
- `OpenClawGitCommit`: kurzer Git-Hash (oder `unknown`, falls nicht verfügbar)

Der About-Tab liest diese Schlüssel, um Version, Build-Datum, Git-Commit und anzuzeigen, ob es sich um einen Debug-Build handelt (über `#if DEBUG`). Führen Sie den Packager nach Code-Änderungen aus, um diese Werte zu aktualisieren.

## Warum

TCC-Berechtigungen sind an die Bundle-ID _und_ die Code-Signatur gebunden. Unsignierte Debug-Builds mit wechselnden UUIDs führten dazu, dass macOS die Freigaben nach jedem Neuaufbau vergaß. Das Signieren der Binaries (standardmäßig Ad-hoc) und das Beibehalten einer festen Bundle-ID/-Pfads (`dist/OpenClaw.app`) erhält die Freigaben zwischen Builds und entspricht dem VibeTunnel-Ansatz.
