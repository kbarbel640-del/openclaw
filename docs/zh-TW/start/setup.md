---
summary: 「OpenClaw 的進階設定與開發工作流程」
read_when:
  - 設定新機器時
  - 你想要「最新 + 最強」又不破壞個人設定
title: 「設定」
x-i18n:
  source_path: start/setup.md
  source_hash: 6620daddff099dc0
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T06:54:49Z
---

# 設定

<Note>
如果你是第一次設定，請從 [入門指南](/start/getting-started) 開始。
精靈的詳細資訊請見 [入門引導精靈](/start/wizard)。
</Note>

最後更新：2026-01-01

## TL;DR

- **客製化放在 repo 外部：** `~/.openclaw/workspace`（workspace）+ `~/.openclaw/openclaw.json`（config）。
- **穩定工作流程：** 安裝 macOS 應用程式；讓它執行隨附的 Gateway 閘道器。
- **前沿工作流程：** 透過 `pnpm gateway:watch` 自行執行 Gateway 閘道器，然後讓 macOS 應用程式以 Local 模式連接。

## 先決條件（從原始碼）

- Node `>=22`
- `pnpm`
- Docker（選用；僅用於容器化設定 / e2e — 請見 [Docker](/install/docker)）

## 客製化策略（避免更新造成影響）

如果你想要「100% 為我量身打造」_同時_ 又能輕鬆更新，請將你的自訂內容放在：

- **Config：** `~/.openclaw/openclaw.json`（JSON / JSON5 風格）
- **Workspace：** `~/.openclaw/workspace`（Skills、提示、記憶；建議做成私有 git repo）

只需初始化一次：

```bash
openclaw setup
```

在此 repo 內，使用本地的 CLI 入口：

```bash
openclaw setup
```

如果你還沒有全域安裝，請透過 `pnpm openclaw setup` 執行。

## 從此 repo 執行 Gateway 閘道器

在 `pnpm build` 之後，你可以直接執行封裝好的 CLI：

```bash
node openclaw.mjs gateway --port 18789 --verbose
```

## 穩定工作流程（macOS 應用程式優先）

1. 安裝並啟動 **OpenClaw.app**（選單列）。
2. 完成入門引導 / 權限檢查清單（TCC 提示）。
3. 確認 Gateway 閘道器為 **Local** 並正在執行（由應用程式管理）。
4. 連結介面（例如：WhatsApp）：

```bash
openclaw channels login
```

5. 基本檢查：

```bash
openclaw health
```

如果你的版本中沒有入門引導：

- 執行 `openclaw setup`，接著 `openclaw channels login`，然後手動啟動 Gateway 閘道器（`openclaw gateway`）。

## 前沿工作流程（在終端機中執行 Gateway 閘道器）

目標：在 TypeScript Gateway 閘道器上開發，取得熱重載，同時保留 macOS 應用程式 UI 連接。

### 0)（選用）也從原始碼執行 macOS 應用程式

如果你也希望 macOS 應用程式保持在前沿版本：

```bash
./scripts/restart-mac.sh
```

### 1) 啟動開發用 Gateway 閘道器

```bash
pnpm install
pnpm gateway:watch
```

`gateway:watch` 會以 watch 模式執行 Gateway 閘道器，並在 TypeScript 變更時重新載入。

### 2) 讓 macOS 應用程式指向你正在執行的 Gateway 閘道器

在 **OpenClaw.app** 中：

- Connection Mode：**Local**
  應用程式會連接到設定連接埠上的執行中 Gateway 閘道器。

### 3) 驗證

- 應用程式內的 Gateway 狀態應顯示 **「Using existing gateway …」**
- 或透過 CLI：

```bash
openclaw health
```

### 常見地雷

- **連接埠錯誤：** Gateway WS 預設為 `ws://127.0.0.1:18789`；請確保應用程式與 CLI 使用相同的連接埠。
- **狀態資料位置：**
  - 憑證：`~/.openclaw/credentials/`
  - 工作階段：`~/.openclaw/agents/<agentId>/sessions/`
  - 記錄：`/tmp/openclaw/`

## 憑證儲存對照表

在除錯驗證或決定要備份什麼時使用：

- **WhatsApp：** `~/.openclaw/credentials/whatsapp/<accountId>/creds.json`
- **Telegram 機器人權杖：** config / 環境變數或 `channels.telegram.tokenFile`
- **Discord 機器人權杖：** config / 環境變數（尚未支援權杖檔案）
- **Slack 權杖：** config / 環境變數（`channels.slack.*`）
- **配對允許清單：** `~/.openclaw/credentials/<channel>-allowFrom.json`
- **模型驗證設定檔：** `~/.openclaw/agents/<agentId>/agent/auth-profiles.json`
- **舊版 OAuth 匯入：** `~/.openclaw/credentials/oauth.json`
  更多細節請見：[Security](/gateway/security#credential-storage-map)。

## 更新（不破壞你的設定）

- 將 `~/.openclaw/workspace` 與 `~/.openclaw/` 視為「你的東西」；不要把個人提示 / 設定放進 `openclaw` repo。
- 更新原始碼：`git pull` + `pnpm install`（當 lockfile 變更時）+ 持續使用 `pnpm gateway:watch`。

## Linux（systemd 使用者服務）

Linux 安裝使用 systemd **使用者** 服務。預設情況下，systemd 會在登出 / 閒置時停止使用者服務，這會終止 Gateway 閘道器。入門引導會嘗試為你啟用 lingering（可能會要求 sudo）。如果仍未啟用，請執行：

```bash
sudo loginctl enable-linger $USER
```

若是需要常駐或多使用者的伺服器，請考慮使用 **系統** 服務而非使用者服務（不需要 lingering）。systemd 相關說明請見 [Gateway runbook](/gateway)。

## 相關文件

- [Gateway runbook](/gateway)（旗標、監督、連接埠）
- [Gateway configuration](/gateway/configuration)（設定結構描述 + 範例）
- [Discord](/channels/discord) 與 [Telegram](/channels/telegram)（回覆標籤 + replyToMode 設定）
- [OpenClaw assistant setup](/start/openclaw)
- [macOS app](/platforms/macos)（Gateway 生命週期）
