---
summary: "iOS 節點應用程式：連線至 Gateway 閘道器、配對、Canvas 與疑難排解"
read_when:
  - 配對或重新連線 iOS 節點時
  - 從原始碼執行 iOS 應用程式時
  - 偵錯 Gateway 探索或 Canvas 指令時
title: "iOS 應用程式"
x-i18n:
  source_path: platforms/ios.md
  source_hash: 692eebdc82e4bb8d
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T06:53:59Z
---

# iOS 應用程式（Node）

可用性：內部預覽。iOS 應用程式尚未公開發佈。

## 功能說明

- 透過 WebSocket 連線至 Gateway 閘道器（LAN 或 tailnet）。
- 提供節點功能：Canvas、螢幕快照、相機擷取、位置、對話模式、語音喚醒。
- 接收 `node.invoke` 指令並回報節點狀態事件。

## 需求

- Gateway 閘道器需在另一台裝置上執行（macOS、Linux，或透過 WSL2 的 Windows）。
- 網路路徑：
  - 透過 Bonjour 的同一個 LAN，**或**
  - 透過單點 DNS-SD 的 tailnet（範例網域：`openclaw.internal.`），**或**
  - 手動主機／連接埠（備援）。

## 快速開始（配對 + 連線）

1. 啟動 Gateway 閘道器：

```bash
openclaw gateway --port 18789
```

2. 在 iOS 應用程式中，開啟「設定」，並選擇已探索到的 Gateway（或啟用「手動主機」並輸入主機／連接埠）。

3. 在 Gateway 主機上核准配對請求：

```bash
openclaw nodes pending
openclaw nodes approve <requestId>
```

4. 驗證連線：

```bash
openclaw nodes status
openclaw gateway call node.list --params "{}"
```

## 探索路徑

### Bonjour（LAN）

Gateway 閘道器會在 `local.` 上廣播 `_openclaw-gw._tcp`。iOS 應用程式會自動列出這些項目。

### Tailnet（跨網路）

若 mDNS 被封鎖，請使用單點 DNS-SD 區域（選擇一個網域；範例：`openclaw.internal.`）以及 Tailscale 分割 DNS。
CoreDNS 的範例請參考 [Bonjour](/gateway/bonjour)。

### 手動主機／連接埠

在「設定」中啟用 **Manual Host**，並輸入 Gateway 主機 + 連接埠（預設為 `18789`）。

## Canvas + A2UI

iOS 節點會渲染一個 WKWebView Canvas。使用 `node.invoke` 來驅動它：

```bash
openclaw nodes invoke --node "iOS Node" --command canvas.navigate --params '{"url":"http://<gateway-host>:18793/__openclaw__/canvas/"}'
```

注意事項：

- Gateway Canvas 主機會提供 `/__openclaw__/canvas/` 與 `/__openclaw__/a2ui/`。
- 當廣播了 Canvas 主機 URL 時，iOS 節點會在連線時自動導向 A2UI。
- 使用 `canvas.navigate` 與 `{"url":""}` 可返回內建的骨架介面。

### Canvas eval／快照

```bash
openclaw nodes invoke --node "iOS Node" --command canvas.eval --params '{"javaScript":"(() => { const {ctx} = window.__openclaw; ctx.clearRect(0,0,innerWidth,innerHeight); ctx.lineWidth=6; ctx.strokeStyle=\"#ff2d55\"; ctx.beginPath(); ctx.moveTo(40,40); ctx.lineTo(innerWidth-40, innerHeight-40); ctx.stroke(); return \"ok\"; })()"}'
```

```bash
openclaw nodes invoke --node "iOS Node" --command canvas.snapshot --params '{"maxWidth":900,"format":"jpeg"}'
```

## 語音喚醒 + 對話模式

- 語音喚醒與對話模式可在「設定」中啟用。
- iOS 可能會暫停背景音訊；當應用程式未在前景時，語音功能請視為最佳努力支援。

## 常見錯誤

- `NODE_BACKGROUND_UNAVAILABLE`：請將 iOS 應用程式帶到前景（Canvas／相機／螢幕指令需要前景狀態）。
- `A2UI_HOST_NOT_CONFIGURED`：Gateway 閘道器未廣播 Canvas 主機 URL；請檢查 [Gateway 設定](/gateway/configuration) 中的 `canvasHost`。
- 配對提示從未出現：執行 `openclaw nodes pending` 並手動核准。
- 重新安裝後無法重新連線：鑰匙圈中的配對權杖已被清除；請重新配對節點。

## 相關文件

- [配對](/gateway/pairing)
- [探索](/gateway/discovery)
- [Bonjour](/gateway/bonjour)
