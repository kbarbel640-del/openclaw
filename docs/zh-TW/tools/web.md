---
summary: "Web 搜尋 + 擷取工具（Brave Search API、Perplexity 直連 / OpenRouter）"
read_when:
  - 你想啟用 web_search 或 web_fetch
  - 你需要設定 Brave Search API 金鑰
  - 你想使用 Perplexity Sonar 進行 Web 搜尋
title: "Web 工具"
x-i18n:
  source_path: tools/web.md
  source_hash: f5f25d2b40ccf1e5
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T06:55:14Z
---

# Web 工具

OpenClaw 隨附兩個輕量級的 Web 工具：

- `web_search` — 透過 Brave Search API（預設）或 Perplexity Sonar（直連或經由 OpenRouter）搜尋 Web。
- `web_fetch` — HTTP 擷取 + 可讀內容抽取（HTML → markdown / 文字）。

這些**不是**瀏覽器自動化。對於 JavaScript 密集的網站或需要登入的情境，請使用
[Browser tool](/tools/browser)。

## 運作方式

- `web_search` 會呼叫你設定的提供者並回傳結果。
  - **Brave**（預設）：回傳結構化結果（標題、URL、摘要）。
  - **Perplexity**：回傳具引用來源的 AI 綜合答案，基於即時 Web 搜尋。
- 結果會依查詢快取 15 分鐘（可設定）。
- `web_fetch` 進行純 HTTP GET 並抽取可讀內容
  （HTML → markdown / 文字）。它**不會**執行 JavaScript。
- `web_fetch` 預設為啟用（除非明確停用）。

## 選擇搜尋提供者

| 提供者            | 優點                       | 缺點                               | API 金鑰                                     |
| ----------------- | -------------------------- | ---------------------------------- | -------------------------------------------- |
| **Brave**（預設） | 快速、結構化結果、免費方案 | 傳統搜尋結果                       | `BRAVE_API_KEY`                              |
| **Perplexity**    | AI 綜合答案、引用、即時    | 需要 Perplexity 或 OpenRouter 存取 | `OPENROUTER_API_KEY` 或 `PERPLEXITY_API_KEY` |

請參閱 [Brave Search 設定](/brave-search) 與 [Perplexity Sonar](/perplexity) 以取得提供者專屬的詳細資訊。

在設定中指定提供者：

```json5
{
  tools: {
    web: {
      search: {
        provider: "brave", // or "perplexity"
      },
    },
  },
}
```

範例：切換到 Perplexity Sonar（直連 API）：

```json5
{
  tools: {
    web: {
      search: {
        provider: "perplexity",
        perplexity: {
          apiKey: "pplx-...",
          baseUrl: "https://api.perplexity.ai",
          model: "perplexity/sonar-pro",
        },
      },
    },
  },
}
```

## 取得 Brave API 金鑰

1. 前往 https://brave.com/search/api/ 建立 Brave Search API 帳戶
2. 在儀表板中選擇 **Data for Search** 方案（不是「Data for AI」），並產生 API 金鑰。
3. 執行 `openclaw configure --section web` 將金鑰儲存到設定中（建議），或在你的環境中設定 `BRAVE_API_KEY`。

Brave 提供免費方案與付費方案；請到 Brave API 入口網站查看
最新的限制與定價。

### 金鑰設定位置（建議）

**建議：** 執行 `openclaw configure --section web`。它會將金鑰儲存在
`~/.openclaw/openclaw.json` 的 `tools.web.search.apiKey` 之下。

**環境變數替代方案：** 在 Gateway 程序的環境中設定 `BRAVE_API_KEY`。
若為 Gateway 閘道器 安裝，請放在 `~/.openclaw/.env`（或你的
服務環境）中。請參閱 [Env vars](/help/faq#how-does-openclaw-load-environment-variables)。

## 使用 Perplexity（直連或經由 OpenRouter）

Perplexity Sonar 模型內建 Web 搜尋能力，並回傳具引用來源的
AI 綜合答案。你可以透過 OpenRouter 使用（不需要信用卡—支援
加密貨幣 / 預付）。

### 取得 OpenRouter API 金鑰

1. 前往 https://openrouter.ai/ 建立帳戶
2. 儲值點數（支援加密貨幣、預付或信用卡）
3. 在帳戶設定中產生 API 金鑰

### 設定 Perplexity 搜尋

```json5
{
  tools: {
    web: {
      search: {
        enabled: true,
        provider: "perplexity",
        perplexity: {
          // API key (optional if OPENROUTER_API_KEY or PERPLEXITY_API_KEY is set)
          apiKey: "sk-or-v1-...",
          // Base URL (key-aware default if omitted)
          baseUrl: "https://openrouter.ai/api/v1",
          // Model (defaults to perplexity/sonar-pro)
          model: "perplexity/sonar-pro",
        },
      },
    },
  },
}
```

**環境變數替代方案：** 在 Gateway
環境中設定 `OPENROUTER_API_KEY` 或 `PERPLEXITY_API_KEY`。若為 Gateway 安裝，請放在 `~/.openclaw/.env`。

若未設定 base URL，OpenClaw 會依 API 金鑰來源選擇預設值：

- `PERPLEXITY_API_KEY` 或 `pplx-...` → `https://api.perplexity.ai`
- `OPENROUTER_API_KEY` 或 `sk-or-...` → `https://openrouter.ai/api/v1`
- 未知的金鑰格式 → OpenRouter（安全的備援）

### 可用的 Perplexity 模型

| 模型                             | 說明                  | 最適合   |
| -------------------------------- | --------------------- | -------- |
| `perplexity/sonar`               | 具 Web 搜尋的快速問答 | 快速查詢 |
| `perplexity/sonar-pro`（預設）   | 具 Web 搜尋的多步推理 | 複雜問題 |
| `perplexity/sonar-reasoning-pro` | 思維鏈分析            | 深度研究 |

## web_search

使用你設定的提供者進行 Web 搜尋。

### 需求

- `tools.web.search.enabled` 不得為 `false`（預設：啟用）
- 你所選提供者的 API 金鑰：
  - **Brave**：`BRAVE_API_KEY` 或 `tools.web.search.apiKey`
  - **Perplexity**：`OPENROUTER_API_KEY`、`PERPLEXITY_API_KEY` 或 `tools.web.search.perplexity.apiKey`

### 設定

```json5
{
  tools: {
    web: {
      search: {
        enabled: true,
        apiKey: "BRAVE_API_KEY_HERE", // optional if BRAVE_API_KEY is set
        maxResults: 5,
        timeoutSeconds: 30,
        cacheTtlMinutes: 15,
      },
    },
  },
}
```

### 工具參數

- `query`（必填）
- `count`（1–10；預設來自設定）
- `country`（選填）：區域化結果的 2 碼國家代碼（例如「DE」、「US」、「ALL」）。若省略，Brave 會選擇其預設區域。
- `search_lang`（選填）：搜尋結果的 ISO 語言代碼（例如「de」、「en」、「fr」）
- `ui_lang`（選填）：UI 元素的 ISO 語言代碼
- `freshness`（選填，僅 Brave）：依探索時間篩選（`pd`、`pw`、`pm`、`py` 或 `YYYY-MM-DDtoYYYY-MM-DD`）

**範例：**

```javascript
// German-specific search
await web_search({
  query: "TV online schauen",
  count: 10,
  country: "DE",
  search_lang: "de",
});

// French search with French UI
await web_search({
  query: "actualités",
  country: "FR",
  search_lang: "fr",
  ui_lang: "fr",
});

// Recent results (past week)
await web_search({
  query: "TMBG interview",
  freshness: "pw",
});
```

## web_fetch

擷取 URL 並抽取可讀內容。

### 需求

- `tools.web.fetch.enabled` 不得為 `false`（預設：啟用）
- 選用的 Firecrawl 備援：設定 `tools.web.fetch.firecrawl.apiKey` 或 `FIRECRAWL_API_KEY`。

### 設定

```json5
{
  tools: {
    web: {
      fetch: {
        enabled: true,
        maxChars: 50000,
        maxCharsCap: 50000,
        timeoutSeconds: 30,
        cacheTtlMinutes: 15,
        maxRedirects: 3,
        userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 14_7_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",
        readability: true,
        firecrawl: {
          enabled: true,
          apiKey: "FIRECRAWL_API_KEY_HERE", // optional if FIRECRAWL_API_KEY is set
          baseUrl: "https://api.firecrawl.dev",
          onlyMainContent: true,
          maxAgeMs: 86400000, // ms (1 day)
          timeoutSeconds: 60,
        },
      },
    },
  },
}
```

### 工具參數

- `url`（必填，僅 http / https）
- `extractMode`（`markdown` | `text`）
- `maxChars`（截斷過長頁面）

注意事項：

- `web_fetch` 會先使用 Readability（主內容抽取），再使用 Firecrawl（若已設定）。若兩者皆失敗，工具會回傳錯誤。
- Firecrawl 請求預設使用繞過機器人的模式並快取結果。
- `web_fetch` 預設送出類 Chrome 的 User-Agent 與 `Accept-Language`；需要時可覆寫 `userAgent`。
- `web_fetch` 會封鎖私人 / 內部主機名稱並重新檢查重新導向（以 `maxRedirects` 限制）。
- `maxChars` 會被限制為 `tools.web.fetch.maxCharsCap`。
- `web_fetch` 屬於盡力而為的抽取；某些網站需要使用 Browser tool。
- 金鑰設定與服務細節請參閱 [Firecrawl](/tools/firecrawl)。
- 回應會被快取（預設 15 分鐘）以降低重複擷取。
- 若你使用工具設定檔 / 允許清單，請加入 `web_search` / `web_fetch` 或 `group:web`。
- 若缺少 Brave 金鑰，`web_search` 會回傳簡短的設定提示與文件連結。
