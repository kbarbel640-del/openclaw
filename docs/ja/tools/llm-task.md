---
summary: "ワークフロー向けの JSON 専用 LLM タスク（オプションのプラグインツール）"
read_when:
  - ワークフロー内に JSON 専用の LLM ステップが必要な場合
  - 自動化のためにスキーマ検証された LLM 出力が必要な場合
title: "LLM タスク"
x-i18n:
  source_path: tools/llm-task.md
  source_hash: b7aa78f179cb0f63
  provider: openai
  model: gpt-5.2-pro
  workflow: v1
  generated_at: 2026-02-06T05:11:46Z
---

# LLM タスク

`llm-task` は、JSON 専用の LLM タスクを実行して構造化出力を返す（必要に応じて JSON Schema に対して検証する）**オプションのプラグインツール**です。

これは Lobster のようなワークフローエンジンに最適です。各ワークフローごとにカスタムの OpenClaw コードを書かなくても、単一の LLM ステップを追加できます。

## プラグインを有効化する

1. プラグインを有効化します。

```json
{
  "plugins": {
    "entries": {
      "llm-task": { "enabled": true }
    }
  }
}
```

2. ツールを許可リストに追加します（`optional: true` で登録されています）。

```json
{
  "agents": {
    "list": [
      {
        "id": "main",
        "tools": { "allow": ["llm-task"] }
      }
    ]
  }
}
```

## 設定（任意）

```json
{
  "plugins": {
    "entries": {
      "llm-task": {
        "enabled": true,
        "config": {
          "defaultProvider": "openai-codex",
          "defaultModel": "gpt-5.2",
          "defaultAuthProfileId": "main",
          "allowedModels": ["openai-codex/gpt-5.3-codex"],
          "maxTokens": 800,
          "timeoutMs": 30000
        }
      }
    }
  }
}
```

`allowedModels` は `provider/model` 文字列の許可リストです。設定されている場合、リスト外のリクエストは拒否されます。

## ツールパラメータ

- `prompt`（string、必須）
- `input`（any、任意）
- `schema`（object、任意の JSON Schema）
- `provider`（string、任意）
- `model`（string、任意）
- `authProfileId`（string、任意）
- `temperature`（number、任意）
- `maxTokens`（number、任意）
- `timeoutMs`（number、任意）

## 出力

解析済みの JSON を含む `details.json` を返します（提供された場合は `schema` に対して検証します）。

## 例: Lobster ワークフローステップ

```lobster
openclaw.invoke --tool llm-task --action json --args-json '{
  "prompt": "Given the input email, return intent and draft.",
  "input": {
    "subject": "Hello",
    "body": "Can you help?"
  },
  "schema": {
    "type": "object",
    "properties": {
      "intent": { "type": "string" },
      "draft": { "type": "string" }
    },
    "required": ["intent", "draft"],
    "additionalProperties": false
  }
}'
```

## 安全性に関する注意

- このツールは **JSON 専用**であり、モデルに JSON のみ（コードフェンスなし、コメントなし）を出力するよう指示します。
- この実行では、モデルに対してツールは公開されません。
- `schema` で検証しない限り、出力は信頼できないものとして扱ってください。
- 影響を伴うステップ（送信、投稿、実行）の前に承認を挟んでください。
