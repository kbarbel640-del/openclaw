---
summary: "Autenticación del modelo: OAuth, claves API y setup-token"
read_when:
  - Depuración de la autenticación del modelo o caducidad de OAuth
  - Documentación de autenticación o almacenamiento de credenciales
title: "Autenticación"
x-i18n:
  source_path: gateway/authentication.md
  source_hash: 66fa2c64ff374c9c
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T06:58:51Z
---

# Autenticación

OpenClaw admite OAuth y claves API para proveedores de modelos. Para cuentas de Anthropic, recomendamos usar una **clave API**. Para acceso mediante suscripción de Claude, use el token de larga duración creado por `claude setup-token`.

Consulte [/concepts/oauth](/concepts/oauth) para ver el flujo completo de OAuth y el diseño de almacenamiento.

## Configuración recomendada de Anthropic (clave API)

Si usa Anthropic directamente, utilice una clave API.

1. Cree una clave API en la Consola de Anthropic.
2. Colóquela en el **host del gateway** (la máquina que ejecuta `openclaw gateway`).

```bash
export ANTHROPIC_API_KEY="..."
openclaw models status
```

3. Si el Gateway se ejecuta bajo systemd/launchd, es preferible poner la clave en
   `~/.openclaw/.env` para que el daemon pueda leerla:

```bash
cat >> ~/.openclaw/.env <<'EOF'
ANTHROPIC_API_KEY=...
EOF
```

Luego reinicie el daemon (o reinicie su proceso del Gateway) y vuelva a comprobar:

```bash
openclaw models status
openclaw doctor
```

Si prefiere no gestionar variables de entorno por su cuenta, el asistente de incorporacion puede almacenar claves API para uso del daemon: `openclaw onboard`.

Consulte [Help](/help) para obtener detalles sobre la herencia de variables de entorno (`env.shellEnv`,
`~/.openclaw/.env`, systemd/launchd).

## Anthropic: setup-token (autenticación por suscripción)

Para Anthropic, la ruta recomendada es una **clave API**. Si usa una suscripción de Claude, también se admite el flujo de setup-token. Ejecútelo en el **host del gateway**:

```bash
claude setup-token
```

Luego péguelo en OpenClaw:

```bash
openclaw models auth setup-token --provider anthropic
```

Si el token se creó en otra máquina, péguelo manualmente:

```bash
openclaw models auth paste-token --provider anthropic
```

Si ve un error de Anthropic como:

```
This credential is only authorized for use with Claude Code and cannot be used for other API requests.
```

…use una clave API de Anthropic en su lugar.

Entrada manual de token (cualquier proveedor; escribe `auth-profiles.json` + actualiza la configuración):

```bash
openclaw models auth paste-token --provider anthropic
openclaw models auth paste-token --provider openrouter
```

Comprobación apta para automatización (sale con `1` cuando está caducado/falta, `2` cuando está por caducar):

```bash
openclaw models status --check
```

Los scripts opcionales de operaciones (systemd/Termux) están documentados aquí:
[/automation/auth-monitoring](/automation/auth-monitoring)

> `claude setup-token` requiere un TTY interactivo.

## Comprobación del estado de autenticación del modelo

```bash
openclaw models status
openclaw doctor
```

## Control de qué credencial se usa

### Por sesión (comando de chat)

Use `/model <alias-or-id>@<profileId>` para fijar una credencial de proveedor específica para la sesión actual (ejemplos de IDs de perfil: `anthropic:default`, `anthropic:work`).

Use `/model` (o `/model list`) para un selector compacto; use `/model status` para la vista completa (candidatos + siguiente perfil de autenticación, además de detalles del endpoint del proveedor cuando esté configurado).

### Por agente (anulación por CLI)

Establezca una anulación explícita del orden de perfiles de autenticación para un agente (almacenada en el `auth-profiles.json` de ese agente):

```bash
openclaw models auth order get --provider anthropic
openclaw models auth order set --provider anthropic anthropic:default
openclaw models auth order clear --provider anthropic
```

Use `--agent <id>` para apuntar a un agente específico; omítalo para usar el agente predeterminado configurado.

## Solucion de problemas

### “No credentials found”

Si falta el perfil de token de Anthropic, ejecute `claude setup-token` en el
**host del gateway**, y luego vuelva a comprobar:

```bash
openclaw models status
```

### Token por caducar/caducado

Ejecute `openclaw models status` para confirmar qué perfil está por caducar. Si falta el perfil, vuelva a ejecutar `claude setup-token` y pegue el token nuevamente.

## Requisitos

- Suscripción Claude Max o Pro (para `claude setup-token`)
- Claude Code CLI instalado (comando `claude` disponible)
