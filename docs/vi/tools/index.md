---
summary: "Bề mặt công cụ tác tử cho OpenClaw (trình duyệt, canvas, node, nhắn tin, cron) thay thế các skills `openclaw-*` cũ"
read_when:
  - Thêm hoặc chỉnh sửa công cụ tác tử
  - Ngừng sử dụng hoặc thay đổi các skills `openclaw-*`
title: "Công cụ"
x-i18n:
  source_path: tools/index.md
  source_hash: 332c319afb6e65ad
  provider: openai
  model: gpt-5.2-chat-latest
  workflow: v1
  generated_at: 2026-02-08T07:09:24Z
---

# Tools (OpenClaw)

OpenClaw cung cấp **các công cụ tác tử hạng nhất** cho trình duyệt, canvas, node và cron.
Chúng thay thế các skills `openclaw-*` cũ: công cụ được định kiểu, không shelling,
và tác tử nên dựa trực tiếp vào chúng.

## Vô hiệu hóa công cụ

Bạn có thể cho phép/từ chối công cụ trên toàn cục thông qua `tools.allow` / `tools.deny` trong `openclaw.json`
(từ chối có ưu tiên). Điều này ngăn các công cụ không được phép được gửi tới các nhà cung cấp mô hình.

```json5
{
  tools: { deny: ["browser"] },
}
```

Ghi chú:

- So khớp không phân biệt chữ hoa/thường.
- Hỗ trợ ký tự đại diện `*` (`"*"` nghĩa là tất cả công cụ).
- Nếu `tools.allow` chỉ tham chiếu các tên công cụ plugin không xác định hoặc chưa tải, OpenClaw sẽ ghi log cảnh báo và bỏ qua allowlist để các công cụ lõi vẫn khả dụng.

## Hồ sơ công cụ (allowlist cơ sở)

`tools.profile` đặt **allowlist công cụ cơ sở** trước `tools.allow`/`tools.deny`.
Ghi đè theo tác tử: `agents.list[].tools.profile`.

Các hồ sơ:

- `minimal`: chỉ `session_status`
- `coding`: `group:fs`, `group:runtime`, `group:sessions`, `group:memory`, `image`
- `messaging`: `group:messaging`, `sessions_list`, `sessions_history`, `sessions_send`, `session_status`
- `full`: không hạn chế (giống như không đặt)

Ví dụ (mặc định chỉ nhắn tin, cho phép thêm công cụ Slack + Discord):

```json5
{
  tools: {
    profile: "messaging",
    allow: ["slack", "discord"],
  },
}
```

Ví dụ (hồ sơ coding, nhưng từ chối exec/process ở mọi nơi):

```json5
{
  tools: {
    profile: "coding",
    deny: ["group:runtime"],
  },
}
```

Ví dụ (hồ sơ coding toàn cục, tác tử hỗ trợ chỉ nhắn tin):

```json5
{
  tools: { profile: "coding" },
  agents: {
    list: [
      {
        id: "support",
        tools: { profile: "messaging", allow: ["slack"] },
      },
    ],
  },
}
```

## Chính sách công cụ theo nhà cung cấp

Dùng `tools.byProvider` để **giới hạn thêm** công cụ cho các nhà cung cấp cụ thể
(hoặc một `provider/model`) mà không thay đổi mặc định toàn cục.
Ghi đè theo tác tử: `agents.list[].tools.byProvider`.

Điều này được áp dụng **sau** hồ sơ công cụ cơ sở và **trước** danh sách cho phép/từ chối,
vì vậy chỉ có thể thu hẹp tập công cụ.
Khóa nhà cung cấp chấp nhận `provider` (ví dụ: `google-antigravity`) hoặc
`provider/model` (ví dụ: `openai/gpt-5.2`).

Ví dụ (giữ hồ sơ coding toàn cục, nhưng công cụ tối thiểu cho Google Antigravity):

```json5
{
  tools: {
    profile: "coding",
    byProvider: {
      "google-antigravity": { profile: "minimal" },
    },
  },
}
```

Ví dụ (allowlist theo nhà cung cấp/mô hình cho một endpoint không ổn định):

```json5
{
  tools: {
    allow: ["group:fs", "group:runtime", "sessions_list"],
    byProvider: {
      "openai/gpt-5.2": { allow: ["group:fs", "sessions_list"] },
    },
  },
}
```

Ví dụ (ghi đè theo tác tử cho một nhà cung cấp duy nhất):

```json5
{
  agents: {
    list: [
      {
        id: "support",
        tools: {
          byProvider: {
            "google-antigravity": { allow: ["message", "sessions_list"] },
          },
        },
      },
    ],
  },
}
```

## Nhóm công cụ (viết tắt)

Chính sách công cụ (toàn cục, tác tử, sandbox) hỗ trợ các mục `group:*` mở rộng thành nhiều công cụ.
Dùng chúng trong `tools.allow` / `tools.deny`.

Các nhóm khả dụng:

- `group:runtime`: `exec`, `bash`, `process`
- `group:fs`: `read`, `write`, `edit`, `apply_patch`
- `group:sessions`: `sessions_list`, `sessions_history`, `sessions_send`, `sessions_spawn`, `session_status`
- `group:memory`: `memory_search`, `memory_get`
- `group:web`: `web_search`, `web_fetch`
- `group:ui`: `browser`, `canvas`
- `group:automation`: `cron`, `gateway`
- `group:messaging`: `message`
- `group:nodes`: `nodes`
- `group:openclaw`: tất cả công cụ OpenClaw dựng sẵn (không gồm plugin của nhà cung cấp)

Ví dụ (chỉ cho phép công cụ file + trình duyệt):

```json5
{
  tools: {
    allow: ["group:fs", "browser"],
  },
}
```

## Plugin + công cụ

Plugin có thể đăng ký **các công cụ bổ sung** (và lệnh CLI) ngoài bộ lõi.
Xem [Plugins](/plugin) để cài đặt + cấu hình, và [Skills](/tools/skills) để biết cách
hướng dẫn sử dụng công cụ được chèn vào prompt. Một số plugin đi kèm skills riêng
cùng với công cụ (ví dụ plugin gọi thoại).

Công cụ plugin tùy chọn:

- [Lobster](/tools/lobster): runtime workflow có kiểu với phê duyệt có thể tiếp tục (yêu cầu Lobster CLI trên host Gateway).
- [LLM Task](/tools/llm-task): bước LLM chỉ JSON cho đầu ra workflow có cấu trúc (tùy chọn xác thực schema).

## Danh mục công cụ

### `apply_patch`

Áp dụng các bản vá có cấu trúc trên một hoặc nhiều file. Dùng cho chỉnh sửa nhiều hunk.
Thử nghiệm: bật qua `tools.exec.applyPatch.enabled` (chỉ mô hình OpenAI).

### `exec`

Chạy lệnh shell trong workspace.

Tham số cốt lõi:

- `command` (bắt buộc)
- `yieldMs` (tự chuyển nền sau timeout, mặc định 10000)
- `background` (chạy nền ngay)
- `timeout` (giây; kết thúc tiến trình nếu vượt, mặc định 1800)
- `elevated` (bool; chạy trên host nếu chế độ nâng cao được bật/cho phép; chỉ thay đổi hành vi khi tác tử ở trong sandbox)
- `host` (`sandbox | gateway | node`)
- `security` (`deny | allowlist | full`)
- `ask` (`off | on-miss | always`)
- `node` (id/tên node cho `host=node`)
- Cần TTY thật? Đặt `pty: true`.

Ghi chú:

- Trả về `status: "running"` với `sessionId` khi chạy nền.
- Dùng `process` để poll/log/write/kill/clear các phiên nền.
- Nếu `process` bị từ chối, `exec` chạy đồng bộ và bỏ qua `yieldMs`/`background`.
- `elevated` bị ràng buộc bởi `tools.elevated` cùng với mọi ghi đè `agents.list[].tools.elevated` (cả hai đều phải cho phép) và là bí danh cho `host=gateway` + `security=full`.
- `elevated` chỉ thay đổi hành vi khi tác tử ở trong sandbox (nếu không thì không có tác dụng).
- `host=node` có thể nhắm tới ứng dụng đồng hành macOS hoặc host node headless (`openclaw node run`).
- Phê duyệt và allowlist gateway/node: [Exec approvals](/tools/exec-approvals).

### `process`

Quản lý các phiên exec chạy nền.

Hành động cốt lõi:

- `list`, `poll`, `log`, `write`, `kill`, `clear`, `remove`

Ghi chú:

- `poll` trả về đầu ra mới và trạng thái thoát khi hoàn tất.
- `log` hỗ trợ `offset`/`limit` theo dòng (bỏ `offset` để lấy N dòng cuối).
- `process` bị giới hạn theo tác tử; không thấy phiên của tác tử khác.

### `web_search`

Tìm kiếm web bằng Brave Search API.

Tham số cốt lõi:

- `query` (bắt buộc)
- `count` (1–10; mặc định từ `tools.web.search.maxResults`)

Ghi chú:

- Cần khóa Brave API (khuyến nghị: `openclaw configure --section web`, hoặc đặt `BRAVE_API_KEY`).
- Bật qua `tools.web.search.enabled`.
- Phản hồi được cache (mặc định 15 phút).
- Xem [Web tools](/tools/web) để thiết lập.

### `web_fetch`

Lấy và trích xuất nội dung dễ đọc từ URL (HTML → markdown/text).

Tham số cốt lõi:

- `url` (bắt buộc)
- `extractMode` (`markdown` | `text`)
- `maxChars` (cắt ngắn trang dài)

Ghi chú:

- Bật qua `tools.web.fetch.enabled`.
- `maxChars` bị kẹp bởi `tools.web.fetch.maxCharsCap` (mặc định 50000).
- Phản hồi được cache (mặc định 15 phút).
- Với site nhiều JS, ưu tiên công cụ trình duyệt.
- Xem [Web tools](/tools/web) để thiết lập.
- Xem [Firecrawl](/tools/firecrawl) cho phương án chống bot tùy chọn.

### `browser`

Điều khiển trình duyệt chuyên dụng do OpenClaw quản lý.

Hành động cốt lõi:

- `status`, `start`, `stop`, `tabs`, `open`, `focus`, `close`
- `snapshot` (aria/ai)
- `screenshot` (trả về khối ảnh + `MEDIA:<path>`)
- `act` (hành động UI: click/type/press/hover/drag/select/fill/resize/wait/evaluate)
- `navigate`, `console`, `pdf`, `upload`, `dialog`

Quản lý hồ sơ:

- `profiles` — liệt kê tất cả hồ sơ trình duyệt kèm trạng thái
- `create-profile` — tạo hồ sơ mới với cổng tự cấp (hoặc `cdpUrl`)
- `delete-profile` — dừng trình duyệt, xóa dữ liệu người dùng, gỡ khỏi cấu hình (chỉ local)
- `reset-profile` — kill tiến trình mồ côi trên cổng của hồ sơ (chỉ local)

Tham số thường dùng:

- `profile` (tùy chọn; mặc định `browser.defaultProfile`)
- `target` (`sandbox` | `host` | `node`)
- `node` (tùy chọn; chọn id/tên node cụ thể)
  Ghi chú:
- Cần `browser.enabled=true` (mặc định `true`; đặt `false` để tắt).
- Mọi hành động chấp nhận tham số `profile` tùy chọn cho hỗ trợ nhiều instance.
- Khi bỏ `profile`, dùng `browser.defaultProfile` (mặc định "chrome").
- Tên hồ sơ: chữ thường, số và dấu gạch nối (tối đa 64 ký tự).
- Dải cổng: 18800-18899 (~tối đa 100 hồ sơ).
- Hồ sơ từ xa chỉ cho phép attach (không start/stop/reset).
- Nếu có node hỗ trợ trình duyệt kết nối, công cụ có thể tự định tuyến (trừ khi bạn ghim `target`).
- `snapshot` mặc định `ai` khi Playwright được cài; dùng `aria` cho cây trợ năng.
- `snapshot` cũng hỗ trợ tùy chọn role-snapshot (`interactive`, `compact`, `depth`, `selector`) trả về ref như `e12`.
- `act` yêu cầu `ref` từ `snapshot` (giá trị số `12` từ snapshot AI, hoặc `e12` từ role snapshot); dùng `evaluate` cho nhu cầu selector CSS hiếm gặp.
- Tránh `act` → `wait` theo mặc định; chỉ dùng trong trường hợp ngoại lệ (không có trạng thái UI đáng tin để chờ).
- `upload` có thể truyền tùy chọn `ref` để tự click sau khi arm.
- `upload` cũng hỗ trợ `inputRef` (aria ref) hoặc `element` (CSS selector) để đặt trực tiếp `<input type="file">`.

### `canvas`

Điều khiển Canvas của node (present, eval, snapshot, A2UI).

Hành động cốt lõi:

- `present`, `hide`, `navigate`, `eval`
- `snapshot` (trả về khối ảnh + `MEDIA:<path>`)
- `a2ui_push`, `a2ui_reset`

Ghi chú:

- Sử dụng `node.invoke` của Gateway bên dưới.
- Nếu không cung cấp `node`, công cụ chọn mặc định (node đơn đang kết nối hoặc node mac local).
- A2UI chỉ v0.8 (không có `createSurface`); CLI từ chối JSONL v0.9 với lỗi theo dòng.
- Kiểm tra nhanh: `openclaw nodes canvas a2ui push --node <id> --text "Hello from A2UI"`.

### `nodes`

Khám phá và nhắm tới các node đã ghép cặp; gửi thông báo; chụp camera/màn hình.

Hành động cốt lõi:

- `status`, `describe`
- `pending`, `approve`, `reject` (ghép cặp)
- `notify` (macOS `system.notify`)
- `run` (macOS `system.run`)
- `camera_snap`, `camera_clip`, `screen_record`
- `location_get`

Ghi chú:

- Lệnh camera/màn hình yêu cầu ứng dụng node ở tiền cảnh.
- Ảnh trả về khối ảnh + `MEDIA:<path>`.
- Video trả về `FILE:<path>` (mp4).
- Vị trí trả về payload JSON (lat/lon/accuracy/timestamp).
- Tham số `run`: mảng argv `command`; tùy chọn `cwd`, `env` (`KEY=VAL`), `commandTimeoutMs`, `invokeTimeoutMs`, `needsScreenRecording`.

Ví dụ (`run`):

```json
{
  "action": "run",
  "node": "office-mac",
  "command": ["echo", "Hello"],
  "env": ["FOO=bar"],
  "commandTimeoutMs": 12000,
  "invokeTimeoutMs": 45000,
  "needsScreenRecording": false
}
```

### `image`

Phân tích hình ảnh bằng mô hình hình ảnh đã cấu hình.

Tham số cốt lõi:

- `image` (đường dẫn hoặc URL bắt buộc)
- `prompt` (tùy chọn; mặc định "Describe the image.")
- `model` (ghi đè tùy chọn)
- `maxBytesMb` (giới hạn kích thước tùy chọn)

Ghi chú:

- Chỉ khả dụng khi `agents.defaults.imageModel` được cấu hình (chính hoặc dự phòng), hoặc khi có thể suy ra mô hình hình ảnh ngầm từ mô hình mặc định + xác thực đã cấu hình (ghép cặp best‑effort).
- Dùng trực tiếp mô hình hình ảnh (độc lập với mô hình chat chính).

### `message`

Gửi tin nhắn và thao tác kênh trên Discord/Google Chat/Slack/Telegram/WhatsApp/Signal/iMessage/MS Teams.

Hành động cốt lõi:

- `send` (văn bản + media tùy chọn; MS Teams còn hỗ trợ `card` cho Adaptive Cards)
- `poll` (poll WhatsApp/Discord/MS Teams)
- `react` / `reactions` / `read` / `edit` / `delete`
- `pin` / `unpin` / `list-pins`
- `permissions`
- `thread-create` / `thread-list` / `thread-reply`
- `search`
- `sticker`
- `member-info` / `role-info`
- `emoji-list` / `emoji-upload` / `sticker-upload`
- `role-add` / `role-remove`
- `channel-info` / `channel-list`
- `voice-status`
- `event-list` / `event-create`
- `timeout` / `kick` / `ban`

Ghi chú:

- `send` định tuyến WhatsApp qua Gateway; các kênh khác đi trực tiếp.
- `poll` dùng Gateway cho WhatsApp và MS Teams; poll Discord đi trực tiếp.
- Khi một lời gọi công cụ nhắn tin được ràng buộc với phiên chat đang hoạt động, việc gửi bị giới hạn vào mục tiêu của phiên đó để tránh rò rỉ ngữ cảnh chéo.

### `cron`

Quản lý cron job và wakeup của Gateway.

Hành động cốt lõi:

- `status`, `list`
- `add`, `update`, `remove`, `run`, `runs`
- `wake` (xếp hàng sự kiện hệ thống + heartbeat ngay lập tức tùy chọn)

Ghi chú:

- `add` yêu cầu một đối tượng cron job đầy đủ (schema giống RPC `cron.add`).
- `update` dùng `{ id, patch }`.

### `gateway`

Khởi động lại hoặc áp dụng cập nhật cho tiến trình Gateway đang chạy (tại chỗ).

Hành động cốt lõi:

- `restart` (ủy quyền + gửi `SIGUSR1` để khởi động lại trong tiến trình; `openclaw gateway` khởi động lại tại chỗ)
- `config.get` / `config.schema`
- `config.apply` (xác thực + ghi cấu hình + khởi động lại + wake)
- `config.patch` (gộp cập nhật một phần + khởi động lại + wake)
- `update.run` (chạy cập nhật + khởi động lại + wake)

Ghi chú:

- Dùng `delayMs` (mặc định 2000) để tránh gián đoạn phản hồi đang diễn ra.
- `restart` bị tắt theo mặc định; bật bằng `commands.restart: true`.

### `sessions_list` / `sessions_history` / `sessions_send` / `sessions_spawn` / `session_status`

Liệt kê phiên, kiểm tra lịch sử transcript, hoặc gửi sang phiên khác.

Tham số cốt lõi:

- `sessions_list`: `kinds?`, `limit?`, `activeMinutes?`, `messageLimit?` (0 = không)
- `sessions_history`: `sessionKey` (hoặc `sessionId`), `limit?`, `includeTools?`
- `sessions_send`: `sessionKey` (hoặc `sessionId`), `message`, `timeoutSeconds?` (0 = fire-and-forget)
- `sessions_spawn`: `task`, `label?`, `agentId?`, `model?`, `runTimeoutSeconds?`, `cleanup?`
- `session_status`: `sessionKey?` (mặc định hiện tại; chấp nhận `sessionId`), `model?` (`default` xóa ghi đè)

Ghi chú:

- `main` là khóa chat trực tiếp chuẩn; toàn cục/không xác định bị ẩn.
- `messageLimit > 0` lấy N tin nhắn cuối mỗi phiên (lọc tin nhắn công cụ).
- `sessions_send` chờ hoàn tất cuối cùng khi `timeoutSeconds > 0`.
- Việc giao/announce diễn ra sau khi hoàn tất và theo best‑effort; `status: "ok"` xác nhận lượt chạy tác tử đã xong, không đảm bảo announce đã được giao.
- `sessions_spawn` khởi chạy tác tử con và đăng phản hồi announce về chat yêu cầu.
- `sessions_spawn` không chặn và trả về `status: "accepted"` ngay.
- `sessions_send` chạy ping‑pong trả lời (trả `REPLY_SKIP` để dừng; số lượt tối đa qua `session.agentToAgent.maxPingPongTurns`, 0–5).
- Sau ping‑pong, tác tử mục tiêu chạy **bước announce**; trả `ANNOUNCE_SKIP` để chặn announce.

### `agents_list`

Liệt kê id tác tử mà phiên hiện tại có thể nhắm tới bằng `sessions_spawn`.

Ghi chú:

- Kết quả bị giới hạn theo allowlist từng tác tử (`agents.list[].subagents.allowAgents`).
- Khi `["*"]` được cấu hình, công cụ bao gồm tất cả tác tử đã cấu hình và đánh dấu `allowAny: true`.

## Tham số (dùng chung)

Các công cụ dựa trên Gateway (`canvas`, `nodes`, `cron`):

- `gatewayUrl` (mặc định `ws://127.0.0.1:18789`)
- `gatewayToken` (nếu bật xác thực)
- `timeoutMs`

Lưu ý: khi đặt `gatewayUrl`, hãy bao gồm `gatewayToken` một cách tường minh. Công cụ không kế thừa cấu hình
hoặc thông tin xác thực môi trường cho các ghi đè, và thiếu thông tin xác thực tường minh là lỗi.

Công cụ trình duyệt:

- `profile` (tùy chọn; mặc định `browser.defaultProfile`)
- `target` (`sandbox` | `host` | `node`)
- `node` (tùy chọn; ghim id/tên node cụ thể)

## Luồng tác tử khuyến nghị

Tự động hóa trình duyệt:

1. `browser` → `status` / `start`
2. `snapshot` (ai hoặc aria)
3. `act` (click/type/press)
4. `screenshot` nếu cần xác nhận trực quan

Render Canvas:

1. `canvas` → `present`
2. `a2ui_push` (tùy chọn)
3. `snapshot`

Nhắm node:

1. `nodes` → `status`
2. `describe` trên node đã chọn
3. `notify` / `run` / `camera_snap` / `screen_record`

## An toàn

- Tránh `system.run` trực tiếp; chỉ dùng `nodes` → `run` khi có sự đồng ý rõ ràng của người dùng.
- Tôn trọng sự đồng ý của người dùng đối với việc chụp camera/màn hình.
- Dùng `status/describe` để đảm bảo quyền trước khi gọi lệnh media.

## Cách công cụ được trình bày cho tác tử

Công cụ được hiển thị qua hai kênh song song:

1. **Văn bản system prompt**: danh sách dễ đọc cho con người + hướng dẫn.
2. **Schema công cụ**: các định nghĩa hàm có cấu trúc gửi tới API mô hình.

Điều đó có nghĩa là tác tử thấy cả “những công cụ nào tồn tại” và “cách gọi chúng.” Nếu một công cụ
không xuất hiện trong system prompt hoặc schema, mô hình không thể gọi nó.
