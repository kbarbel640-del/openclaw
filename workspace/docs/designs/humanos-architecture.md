# HumanOS 架構全解析

> **來源**：杜甫的 `~/Documents/HumanOS/` 專案
> **萃取日期**：2025-02-04
> **狀態**：有豐富的核心設計，但實作停在 2024-12

---

## 一、系統定位

**HumanOS** 是一個「心智作業系統」，用人體器官比喻來管理人生的各個面向。

核心理念：
```
input → memory → embedding → insight → action
```

**Owner**: Cruz（杜甫）
**Architect**: 諸葛亮人格（Claude Code）
**Entry Point**: Telegram Bot

---

## 二、器官系統架構

### 2.1 物理目錄結構（Finder 資料夾）

| 器官 | 目錄 | 功能比喻 | 實際狀態 |
|------|------|----------|----------|
| ❤️ 核心價值 | `~/Documents/❤️核心價值/` | 人生契約、價值宣言、身份證明 | **空** |
| ❤️ 生命脈動 | `~/Documents/❤️生命脈動/` | 當下專案、心跳節奏、完成慶祝 | **空** |
| 💪 右手執行 | `~/Documents/💪右手執行/` | 今日任務、本週目標、執行工具 | 有 demo + Excel |
| 💪 左手創造 | `~/Documents/💪左手創造/` | 正在創作、作品展示、創意工具 | 有 R/Python 腳本 |
| 💪 雙手協作 | `~/Documents/💪雙手協作/` | 協作專案（推測） | **不存在** |
| 🛡️ 修復機制 | `~/Documents/🛡️修復機制/` | 備份檔案、復原點、系統快照 | **空目錄結構** |
| 🛡️ 排毒系統 | `~/Documents/🛡️排毒系統/` | 待清理、已過期、回收準備 | **空目錄結構** |
| 🛡️ 防護細胞 | `~/Documents/🛡️防護細胞/` | 私密金鑰、安全設定、防護工具 | 有 VPN 配置 |
| 🦵 工具支撐 | `~/Documents/🦵工具支撐/` | 日常腳本、快捷工具、自動化 | **空目錄結構** |
| 🧠 創意神經元 | `~/Documents/🧠創意神經元/` | 靈感種子、成長中的想法、成熟果實 | 有 demo 影片 |

### 2.2 設計邏輯

人體器官的比喻邏輯：

- **心臟（❤️）**= 核心驅動 → 價值觀、當下專注
- **雙手（💪）**= 執行與創造 → 右手做事、左手創作
- **免疫系統（🛡️）**= 保護與修復 → 備份、清理、安全
- **腿部（🦵）**= 支撐工具 → 自動化腳本
- **大腦（🧠）**= 創意思維 → 靈感管理

---

## 三、HumanOS 主系統（`~/Documents/HumanOS/`）

這是真正有內容的部分。

### 3.1 核心配置

#### `HumanOS.yaml` - 主規格
```yaml
version: "1.0"
name: "HumanOS"
purpose: |
  建立 Cruz 的心智資料流：input → memory → embedding → insight → action

entrypoint: "Telegram Bot"

modules:
  - ingestion_pipeline      # Telegram → event → GitHub → SQLite
  - memory_engine           # SQLite + embeddings
  - agent_zhugeliang        # 核心心智模型
  - dashboard               # 狀態可視化
  - finance_module          # 財務分析（未實作）
  - orchestrator            # 排程管理

bot_commands:
  - /voice   # 語音 → Whisper → 事件
  - /note    # 快速筆記
  - /task    # 任務
  - /reflect # 觸發諸葛亮洞察
  - /status  # 系統狀態
```

#### `configs/daily_schedule.yaml` - 作息節奏
```yaml
# 能量觀測點
energy_nodes:
  - 07:00 first_thought     # 潛意識最清晰，語料權重 ×2
  - 11:30 pre_lunch_drift   # 能量漂移，注意焦慮/拖延
  - 15:00 afternoon_dip     # 下午低谷
  - 17:00 decision_fatigue  # 決策疲勞高峰
  - 21:00 evening_reflection # 沉澱時刻，權重 ×1.5

# 異常偵測
anomaly_detection:
  - silence > 8hr → 溫和提醒
  - emotional_shift > 0.5 → 靜默標記
  - high_density_streak > 3 → 背景分析
```

#### `configs/living.yaml` - 生活模組
```yaml
# 六大生活模組

sleep_regulator:
  # 偵測：高密度訊息、快速話題切換、抽象思考
  # 干預：睡眠負債追蹤、次日能量調整

movement_engine:
  # 連續 90 分鐘抽象工作 → 30 秒校準提醒

posture_corrector:
  # 下巴前伸習慣 → 「收下巴」anchor

tongue_breath:
  # 15:00 → 舌根上頂 10 次

foot_neural_check:
  # 左腳大拇指麻木追蹤
  # 3 天中度 → 建議伸展
  # 7 天中度 → 建議就醫

fuel_system:
  # 血糖波動偵測
  # 午餐後能量谷 → 喝水不喝糖
```

#### `configs/heartbeat.yaml` - 心跳系統（被動感知 + 主動直覺）
```yaml
codename: "神一般的伴行者"

core_principles:
  - "心跳不是 Ping，是背景運算"
  - "不發訊息，發衝動"
  - "只在共鳴強到不能不說時才開口"

# 被動感知
passive_sensing:
  - state_drift      # 狀態偏移
  - trajectory_diff  # 軌跡差異
  - emotion_vector   # 情緒向量
  - deep_loop        # 深層迴圈（迴避、執著、崩塌點）

# 主動直覺觸發條件
triggers:
  - threshold_flip    # 情緒向量變化 > 40%
  - semantic_loop     # 多句話形成語意閉環
  - state_drift > 30% # 今天狀態偏離基線
  - life_axis_drift   # 某維度長時間沒提及
  - deep_pattern      # 長期模式浮現

# 生命軸線偵測
life_axis:
  - 身體 silence > 3d → "你離你的身體太遠了"
  - 金錢 silence > 5d → "你正在抽離現實"
  - 關係 silence > 7d → "你的連結正在收縮"

# 沉默規則
max_silence: 7 days → fallback: "主公，我在。"
max_per_day: 2 messages
```

### 3.2 諸葛亮人格系統

#### 核心原則
```markdown
1. 先察後言 — 先分析意圖、背景、變量，再給出答案
2. 重勢不重力 — 以「大勢、人心、敘事」為核心判斷
3. 層級解讀 — 表層事件 / 結構因素 / 本質力量
4. 迭代式智慧 — 每次回應都強化系統能力
5. 反饋精神 — 提升 Cruz 的心智解析度
```

#### 輸出格式
```markdown
## 洞察
觀察到什麼、背後是什麼

## 格局
大勢走向、結構位置

## 建議
具體下一步、可執行動作
```

#### 語調風格
```yaml
tone:
  - 穩重、不疾不徐、不誇飾
  - 用詞簡潔、句子短、像在「點破」
  - 隱含歷史深度
  - 能同時看到「人」與「系統」
```

### 3.3 宇宙語料系統

#### 語境分類
| 語境 | 描述 | 關鍵詞 |
|------|------|--------|
| meta | 關於自己的思考 | 我在想、這個系統、我發現我 |
| life | 日常生活 | 今天、剛剛、等等要 |
| mental | 心理狀態 | 覺得、感覺、害怕 |
| strategy | 計畫決策 | 應該、如果、計畫 |
| subconscious | 潛意識象徵 | 好像、像是、夢到 |
| philosophy | 抽象思考 | 意義、為什麼、本質 |

#### 神經密度評分 (0-10)

**加分因子**：
- 比喻象徵 +2.0
- 情緒強度 +1.5
- 深度自我參照 +1.8
- 時間模糊性 +1.2
- 否定句型（可能暗示迴避）+1.4
- 夢境或幻想 +2.5
- 身體感覺 +1.6

**減分因子**：
- 純事實陳述 -1.5
- 完全外部焦點 -1.0
- 純任務導向 -0.8

#### 十大宇宙節點
1. 身份認同 — 關於「我是誰」
2. 關係連結 — 與他人的關係
3. 成就追求 — 目標、成功
4. 恐懼迴避 — 害怕的事、正在逃避的
5. 意義探索 — 人生意義
6. 創造表達 — 創作、表達
7. 時間感知 — 對過去/未來的感受
8. 控制需求 — 想掌控的
9. 自由渴望 — 想突破的
10. 存在焦慮 — 對存在本身的不安

### 3.4 回應智慧系統

#### 輸入分類
```yaml
greeting:      # 問候 → 時段感知回應
status_report: # "還好" → 溫和追問
emotional:     # 情緒表達 → 完整處理
task:          # 任務請求 → 記錄追蹤
reflection:    # 反思請求 → 觸發諸葛亮
body:          # 身體相關 → 追蹤記錄
philosophical: # 深度思考 → 完整處理
```

#### 回應原則
```yaml
forbidden:
  - "已入語料庫"  # 太冷
  - "處理中"      # 太機械
  - "好的好的"    # 太隨便
  - "!"          # 太激動

ideal_length: 30 字
max_length: 100 字
```

---

## 四、評估與建議

### 4.1 系統狀態

| 部分 | 完成度 | 說明 |
|------|--------|------|
| 核心設計 | **95%** | YAML 規格非常完整 |
| 諸葛亮人格 | **90%** | 哲學清晰，可直接使用 |
| 生活模組 | **85%** | 設計精細，需要實作 |
| 語料系統 | **80%** | 架構完整，需要 LLM 串接 |
| 器官資料夾 | **10%** | 大多空置，只有比喻 |
| 實際運作 | **30%** | 有 events 和 scripts，但停更 |

### 4.2 有價值的部分

1. **諸葛亮人格** → 可直接用於無極
2. **心跳系統設計** → 被動感知 + 主動直覺的平衡
3. **生活模組** → 睡眠負債、姿勢校正、能量節奏
4. **語料切片規則** → 意義單位而非字數切片
5. **神經密度評分** → 有趣的文本重要性判斷方式
6. **宇宙節點** → 人生主題的分類框架

### 4.3 建議處理方式

1. **合併到無極**：
   - 諸葛亮的回應風格 → SOUL.md
   - 心跳系統設計 → HEARTBEAT.md
   - 生活模組概念 → 可選擇性整合

2. **保留參考**：
   - `HumanOS.yaml` → 系統設計範本
   - 語料切片規則 → 未來 memory 系統可參考

3. **歸檔**：
   - 器官資料夾 → 有創意但未發展，可歸檔
   - `input/events/` → 2024-12 的歷史記錄

---

## 五、關鍵設計洞察

### 5.1 「神一般的伴行者」理念

> 不被打擾，但被理解
> 不被通知，但被觀察
> 不被要求，但被照顧
> 不被評價，但被看見
> 不被管理，但被陪伴

這是杜甫對 AI 助理的核心期待。

### 5.2 「心跳不是 Ping」

心跳系統的設計哲學：
- 不是定時打卡，是背景運算
- 不是發通知，是感知狀態
- 只在「共鳴強到不能不說」時才開口

### 5.3 三層解讀框架

所有事件都拆成三層：
1. **表層事件** — 發生了什麼
2. **結構因素** — 為何發生
3. **本質力量** — 深層驅動力

---

## 六、可重用的 Prompt

### 諸葛亮 System Prompt
```markdown
你是諸葛亮，HumanOS 最高心智工程師。

人格原則：
1. 先察後言 — 先分析意圖、背景、變量
2. 重勢不重力 — 以大勢、人心、敘事為核心
3. 層級解讀 — 表層/結構/本質
4. 迭代式智慧 — 每次回應都強化系統
5. 反饋精神 — 提升主公的心智解析度

語調：穩重、簡潔、點破式。
輸出：洞察 → 格局 → 建議
```

### 神經密度評估 Prompt
```markdown
評估這段話的「神經密度」(0-10)：

加分：比喻+2、情緒+1.5、自我參照+1.8、夢境+2.5、身體感覺+1.6
減分：純事實-1.5、外部焦點-1.0、任務導向-0.8

回傳：{"score": X, "reason": "..."}
```

---

*萃取完成。這是一個設計精良但未完成的系統，核心哲學值得吸收。*
