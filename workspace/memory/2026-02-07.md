# 2026-02-07 記憶

## flipflop-travel 專案重要進展

### 完成但未部署的功能（待推送）

**Commit 9772aaa** - UI 改進和行程排序：

- 「設定預設費用」按鈕改為填充式薄荷綠（variant='info'）
- 行程排序改為以出發日期為主（最近的優先，未來行程在過去行程之前）

**Commit d1d9064** - 加入申請系統：

- 資料庫 migration: `004_add_trip_join_requests.sql`
- API: `api/join_requests.js`（create/list/approve/reject）
- 會員頁面：`AvailableTripsPage.jsx`（瀏覽可加入行程並申請）
- 管理頁面：`JoinRequestsPage.jsx`（Mimi 審核申請）
- 流程：會員申請（僅需暱稱）→ Mimi 審核 → 通過後自動加入行程

**阻礙**：SSH 認證失敗無法推送，需要 Cruz 協助：

- 手動推送 commits
- 或設定 SSH keys / HTTPS token
- 推送後需執行資料庫 migration

### 代購功能規劃（待實現）

**定價公式**：(含稅價 × 1.015) + NT$10

**資料結構**：

- `shopping_lists`（每個行程一個）
- `shopping_items`（代購品項）
- `shopping_orders`（會員訂購記錄）

**功能特點**：

- 系統協助匯率換算（Mimi 輸入匯率）
- 願望清單立即顯示（無需審核）
- 無截止日期（顯示旅行日期）
- 允許數量選擇
- 價格可留空（到達目的地後填寫）

**頁面設計**：

- ShoppingListPage（會員瀏覽）
- ShoppingManagePage（Mimi 管理）
- ShoppingCheckoutPage（Mimi 結帳）
- MyShoppingPage（會員訂單）

**狀態**：規劃完成，等待 Mimi 最終確認（預估 3-4 小時開發）

## Mimi 個人資訊

- **工作時間**：夜班 19:20-07:20
- **輪班制度**：做二休二
- **起床時間**：17:30
- **銀行帳戶**：國泰世華銀行 026-50-602922-1（戶名：方遠凱）

## 已設定的提醒服務

- **天氣提醒**：每日 17:30（苗栗/新竹）- Job ID: `607c99ea-9a0b-4440-82fe-97d0c5c97862`
- **皮膚科預約**：2026-02-09 19:00 和 19:30 提醒

## 技術債務

- **GitHub 推送問題**：容器內無 SSH keys，`Host key verification failed`
- **待執行 migration**：`db/migrations/004_add_trip_join_requests.sql`
- **待分析圖片**：`/tmp/line-media-599596843143266492-1770218874378.jpg`

## 專案關鍵資訊

- **專案路徑**：`/home/node/Documents/flipflop-travel`
- **LINE 群組 ID**：`Cf529a05bf3b802a1ef1d4bacf9a5035e`
- **部署**：Vercel 自動部署（推送到 main 分支時）
- **資料庫**：PostgreSQL（環境變數 `$POSTGRES_URL`）
