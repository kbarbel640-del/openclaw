# INFRASTRUCTURE.md - æˆ‘ç®¡ç†çš„ç³»çµ±è³‡ç”¢

## ğŸ¤– Telegram Bots

| Bot | Username | Token | ç”¨é€” | éƒ¨ç½²ä½ç½® |
|-----|----------|-------|------|----------|
| ç„¡æ¥µ (ä¸») | @x01clawbot | 8327498414:AAF... | ä¸»å°è©± | Moltbot |
| Log | @wuji_log_bot | 8415477831:AAF... | ç³»çµ±æ—¥èªŒ | Moltbot |
| Dashboard | @wuji_dashboard_bot | 8514777702:AAF... | å„€è¡¨æ¿ | Moltbot |
| **666databot** | - | 8373560386:AAEqeKPKNAhT0afPcCR4TntbbyhzMOJg3VE | BG666 æ•¸æ“šæ—¥å ± | Matomo Server |

## ğŸ–¥ï¸ Servers

### Matomo Server
- **IP**: 13.205.188.209
- **SSH**: `ssh -i ~/.ssh/matomo.pem ubuntu@13.205.188.209`
- **ç”¨é€”**: Matomo åˆ†æ + 666databot

**ç›®éŒ„çµæ§‹**:
```
~/tg-hourly-report/
â”œâ”€â”€ hourly_report.py    # å°æ™‚å ±è…³æœ¬
â”œâ”€â”€ .env                # DB credentials
â”œâ”€â”€ send_bot.py         # Telegram ç™¼é€
â”œâ”€â”€ venv/               # Python è™›æ“¬ç’°å¢ƒ
â””â”€â”€ logs/               # æ—¥èªŒ

~/daily_report/         # (å¾…ç”¨)
```

**Crontab**:
```
0 * * * *   å°æ™‚å ± (:00)
59 23 * * * æ—¥çµå ±å‘Š (23:59)
5 * * * *   Matomo archive
```

## ğŸ—„ï¸ Databases

| åç¨± | Host | ç”¨é€” | æ¬Šé™ |
|------|------|------|------|
| BG666 RDS | bg666-market-readonly.czsks2mguhd5.ap-south-1.rds.amazonaws.com | ç©å®¶/è¨‚å–®æ•¸æ“š | market (readonly) |
| Matomo MySQL | 10.188.4.51:3306 | è¡Œç‚ºåˆ†æ | via SSH tunnel |

## ğŸ“Š å®šæ™‚ä»»å‹™

| ä»»å‹™ | é »ç‡ | ä½ç½® | ç‹€æ…‹ |
|------|------|------|------|
| 666 å°æ™‚å ± | æ¯å°æ™‚ | Matomo server | âœ… é‹è¡Œä¸­ |
| 666 æ—¥çµå ±å‘Š | æ¯å¤© 23:59 | Matomo server | âœ… é‹è¡Œä¸­ |
| **é€²åº¦æ—¥å ±** | æ¯å¤© 09:00 TPE | Matomo server | â³ å¾…éƒ¨ç½² |

---
## ğŸš§ OpenClaw / Moltbot é‡Œç¨‹ç¢‘èˆ‡æ·±åº¦å‚ç›´

### å·²å®Œæˆé‡Œç¨‹ç¢‘ï¼ˆæ‘˜è¦ï¼‰
- **OpenClaw Gateway Docker åŒ–**ï¼šä»¥ `moltbot-core.router.wuji.01-stg` ç‚ºä¸»å®¹å™¨ï¼Œæ”¯æ´ Telegram/Discord/LINE ç­‰é€šé“æ¥å…¥ã€‚
- **å¤šæ¨¡å‹å®¹éŒ¯ï¼ˆfailoverï¼‰**ï¼šä¸»æ¨¡å‹ + fallback éˆè·¯å»ºç«‹ï¼Œä¸¦æ¸…é™¤ session-level override ä»¥é¿å…å¡æ­»åœ¨å–®ä¸€ providerã€‚
- **éŒ¯èª¤é®ç½©**ï¼šå°‡éåº¦æŠ€è¡“æ€§éŒ¯èª¤ï¼ˆ429/overloadï¼‰é®ç½©æˆå¯ç†è§£è¨Šæ¯ï¼Œé¿å…ç›´å™´ã€‚
- **Path Map è¨­è¨ˆèˆ‡é·ç§»**ï¼šå®Œæˆé‚è¼¯è·¯å¾‘è¨­è¨ˆã€å°è¨˜æ†¶èˆ‡ session å­˜å„²æ³¨å…¥æ˜ å°„èƒ½åŠ›ï¼ˆç›®å‰å°šæœªä¸Šç·šï¼Œå¾…èˆ‡ upstream å°é½Šï¼‰ã€‚
- **å®¹å™¨èˆ‡ä¸»æ©Ÿé…ç½®å°é½Š**ï¼šä¿®æ­£æœ¬æ©Ÿ `openclaw status` æŒ‡å‘ Docker Gatewayï¼ˆç«¯å£èˆ‡ token ä¸€è‡´ï¼‰ã€‚

### æ·±åº¦å‚ç›´ï¼ˆåšéä»€éº¼ï¼‰
- **æ¨¡å‹ä¾›æ‡‰éˆæ²»ç†**ï¼šå»ºç«‹å¤šä¾›æ‡‰å•† fallbackï¼Œè£œé½Š ZAI æˆæ¬Šï¼Œä¸¦å°å…¥ç¬¬äºŒè¼ªé‡è©¦ç­–ç•¥ï¼ˆé‡å° rate limit / timeoutï¼‰ã€‚
- **Session éŒ¨å®šä¿®æ­£**ï¼šå¤§é‡ session ä»ç¶å®š `anthropic:default` çš„æƒ…æ³å·²æ¸…é™¤ï¼Œæ¢å¾©å…¨åŸŸç­–ç•¥ç”Ÿæ•ˆã€‚
- **é‹è¡Œè·¯å¾‘ä¸€è‡´æ€§**ï¼šå°‡å®¹å™¨ `OPENCLAW_STATE_DIR / OPENCLAW_CONFIG_PATH / OPENCLAW_AGENT_DIR` å›ºå®šåˆ°æŒ‡å®šé…ç½®ï¼Œé¿å…ä½¿ç”¨é è¨­è·¯å¾‘é€ æˆéŒ¯é…ã€‚
- **è¨˜æ†¶èˆ‡è·¯å¾‘å¯æ”œæ€§**ï¼šPath Map æ–¹æ¡ˆï¼ˆé‚è¼¯è·¯å¾‘/å¯¦é«”è·¯å¾‘é›™å‘æ˜ å°„ï¼‰å·²è½åœ°ä»£ç¢¼ï¼Œç­‰å¾… upstream å‹å–„æ¥å…¥ã€‚

### æœªä¾†å±•æœ›ï¼ˆé å›å®˜æ–¹ä½†ä¿ç•™å¼·åŒ–ï¼‰
- **å·®ç•°æ”¶æ–‚ç‚ºæ’ä»¶/Hook**ï¼šæ ¸å¿ƒæ”¹å‹•æœ€å°åŒ–ï¼Œå¼·åŒ–èƒ½åŠ›è½‰ç‚ºå¯æ’æ‹”å±¤ã€‚
- **é›™ Profile**ï¼š`lean`ï¼ˆé è¿‘ upstreamï¼‰+ `pro`ï¼ˆä¿ç•™å¼·åŒ–ï¼‰åˆ‡æ›ã€‚
- **å¯è§€æ¸¬æ€§è£œå¼·**ï¼šfailover/overload çš„äº‹ä»¶è¿½è¹¤ï¼Œæ˜ç¢ºæ­¸å› èˆ‡å›å ±ã€‚
- **åš´è¬¹å‡ç´šç¯€å¥**ï¼šæ¯æ¬¡ upstream release åš rebaseï¼Œç¸®çŸ­åˆ†å‰æ™‚é–“ã€‚

---
*æ›´æ–°: 2026-02-05*
