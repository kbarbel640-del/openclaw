{
  "name": "task-accountability",
  "version": "1.0.0",
  "description": "Configurable execution gate - require issue/ticket creation before substantive work",
  "main": "index.ts",
  "configSchema": {
    "type": "object",
    "properties": {
      "strictMode": {
        "type": "boolean",
        "description": "If true, block tool calls. If false, warn only.",
        "default": false
      },
      "gate": {
        "type": "object",
        "description": "Gate configuration",
        "properties": {
          "gatedTools": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Tools that require unlock before execution",
            "default": ["exec", "write", "edit", "Write", "Edit"]
          },
          "unlockPatterns": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Regex patterns that unlock the gate when matched in tool output",
            "default": [
              "github\\.com/[\\w-]+/[\\w-]+/issues/\\d+",
              "gh issue create",
              "#\\d{1,6}",
              "GH-\\d+",
              "[A-Z]{2,5}-\\d+"
            ]
          },
          "exemptPatterns": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Regex patterns for commands always allowed (read-only, etc.)",
            "default": [
              "^cat\\s",
              "^ls\\s",
              "^grep\\s",
              "^git\\s+(status|log|diff|show)",
              "^gh\\s+issue"
            ]
          },
          "unlockDurationMs": {
            "type": "number",
            "description": "How long unlock lasts (ms). Omit for session lifetime."
          }
        }
      },
      "instructions": {
        "oneOf": [{ "type": "string" }, { "type": "boolean", "const": false }],
        "description": "Custom instructions to inject, or false to disable"
      },
      "instructionsFile": {
        "type": "string",
        "description": "Path to custom instructions file"
      }
    }
  }
}
