{
  "feature": "Redesign Gateway Web Dashboard with Basic/Advanced Mode Toggle",
  "workflow_type": "feature",
  "workflow_rationale": "This is a feature development task involving UI redesign with mode toggle. All work is in the UI service (Lit Web Components). No backend changes required. Pattern adoption from AI SDK docs rather than library integration.",
  "phases": [
    {
      "id": "phase-1-core-infrastructure",
      "name": "Core Infrastructure - Mode System",
      "type": "implementation",
      "description": "Add Basic/Advanced mode state management to storage and app.ts. Extend settings interface to include mode preference.",
      "depends_on": [],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Extend storage.ts to include mode preference (Basic/Advanced)",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/storage.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/storage.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds without errors"
          },
          "status": "completed",
          "notes": "Completed: Extended storage.ts to include mode preference with type \"basic\" | \"advanced\". Default value is \"basic\". Build verification passes.",
          "updated_at": "2026-02-14T03:36:27.712549+00:00"
        },
        {
          "id": "subtask-1-2",
          "description": "Add mode state to app.ts with @state() decorator and load/save functionality",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/app.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/app.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm test",
            "expected": "All existing tests pass"
          },
          "status": "completed",
          "notes": "Completed - Added mode state with @state() decorator and load/save functionality following the theme pattern",
          "updated_at": "2026-02-14T03:43:29.065041+00:00"
        },
        {
          "id": "subtask-1-3",
          "description": "Add mode toggle UI component to app-gateway.ts header",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/app-gateway.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/app-gateway.ts"
          ],
          "verification": {
            "type": "manual",
            "instructions": "Verify mode toggle appears in header and toggles state correctly"
          },
          "status": "completed",
          "notes": "Completed: Added mode toggle UI to header with Basic/Advanced options. Added setMode to AppViewState, renderModeToggle function in app-render.helpers.ts, added to header in app-render.ts, and CSS styling in components.css. Build verification passes.",
          "updated_at": "2026-02-14T03:53:12.897063+00:00"
        }
      ]
    },
    {
      "id": "phase-2-navigation",
      "name": "Navigation - Mode-Aware Routing",
      "type": "implementation",
      "description": "Update navigation to filter available tabs based on Basic/Advanced mode. Redirect users if they try to access Advanced-only views in Basic mode.",
      "depends_on": [
        "phase-1-core-infrastructure"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-2-1",
          "description": "Add mode-aware tab filtering to navigation.ts - create function to get visible tabs based on mode",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/navigation.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/navigation.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm test",
            "expected": "All tests pass"
          },
          "status": "completed",
          "notes": "Completed: Added AppMode type and getVisibleTabs function to navigation.ts. Basic mode shows chat, overview, sessions, instances, config. Advanced mode shows all tabs. Tests verify implementation. Commit successful.",
          "updated_at": "2026-02-14T03:56:46.736406+00:00"
        },
        {
          "id": "subtask-2-2",
          "description": "Update navigation rendering in app-render.ts to use mode-aware tab filtering",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/app-render.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/app-render.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Updated app-render.ts to use getVisibleTabs(state.mode) for mode-aware navigation filtering. Build succeeds. Commit successful.",
          "updated_at": "2026-02-14T04:30:00.000000+00:00"
        },
        {
          "id": "subtask-2-3",
          "description": "Add navigation guard to redirect Advanced-only views (debug) to overview when in Basic mode",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/app-settings.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/app-settings.ts"
          ],
          "verification": {
            "type": "manual",
            "instructions": "Verify that accessing #debug in Basic mode redirects to #overview"
          },
          "status": "completed",
          "notes": "Added navigation guard in setTab and setTabFromRoute functions to redirect Advanced-only views (debug, logs) to overview when in Basic mode. Build passes successfully.",
          "updated_at": "2026-02-14T04:06:20.239655+00:00"
        }
      ]
    },
    {
      "id": "phase-3-views-basic",
      "name": "Views - Basic Mode Simplification",
      "type": "implementation",
      "description": "Simplify views for Basic mode - show only essential information. Views to update: overview, sessions, config.",
      "depends_on": [
        "phase-2-navigation"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-3-1",
          "description": "Update overview.ts to show simplified view in Basic mode",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/overview.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/overview.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode property to OverviewProps type, updated overview.ts to conditionally render simplified view in Basic mode (Gateway Access shows only URL and Token, Snapshot shows only Status and Uptime, Stats row shows Instances and Sessions only, Notes section hidden), and updated app-render.ts to pass mode prop. Build verification passes.",
          "updated_at": "2026-02-14T04:12:02.111559+00:00"
        },
        {
          "id": "subtask-3-2",
          "description": "Update sessions.ts to show simplified list in Basic mode",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/sessions.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/sessions.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode property to SessionsProps type, updated sessions.ts to conditionally render simplified view in Basic mode (filters hide Include global/Include unknown, table shows only Key, Label, Kind, Updated columns), and updated app-render.ts to pass mode prop. Build verification passes.",
          "updated_at": "2026-02-14T04:16:58.026545+00:00"
        },
        {
          "id": "subtask-3-3",
          "description": "Update config.ts to show only essential settings in Basic mode",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/config.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/config.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode property to ConfigProps type, filtered sections in Basic mode to show only env and gateway, updated app-render.ts to pass mode prop. Build verification passes. Commit successful.",
          "updated_at": "2026-02-14T04:21:26.581638+00:00"
        }
      ]
    },
    {
      "id": "phase-4-views-advanced",
      "name": "Views - Advanced Mode Full Features",
      "type": "implementation",
      "description": "Ensure all views work correctly in Advanced mode with full functionality. Views: agents, nodes, usage, channels, logs, debug.",
      "depends_on": [
        "phase-3-views-basic"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-4-1",
          "description": "Update agents.ts - add mode-aware rendering (Basic shows simplified, Advanced shows full)",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/agents.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/agents.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode-aware rendering to agents.ts - Basic mode shows simplified tabs (overview, files only), Advanced mode shows all tabs",
          "updated_at": "2026-02-14T04:26:32.133392+00:00"
        },
        {
          "id": "subtask-4-2",
          "description": "Update nodes.ts - add mode-aware rendering (Advanced only for full node management)",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/nodes.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/nodes.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode-aware rendering to nodes.ts - Basic mode shows simplified view (no Exec approvals or bindings), Advanced mode shows full node management features. Build verification passes.",
          "updated_at": "2026-02-14T04:30:28.216261+00:00"
        },
        {
          "id": "subtask-4-3",
          "description": "Update usage.ts - mode-aware rendering",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/usage.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/usage.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode-aware rendering to usage.ts - Basic mode hides Usage Insights, Usage Mosaic (hourly heatmap), Tool filter, and Session Detail Panel. Advanced mode shows all features. Build verification passes.",
          "updated_at": "2026-02-14T04:34:32.705626+00:00"
        },
        {
          "id": "subtask-4-4",
          "description": "Update channels.ts - mode-aware rendering",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/channels.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/channels.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode-aware rendering to channels.ts - Basic mode hides the \"Channel health\" section with JSON snapshot. Advanced mode shows all features including the channel health section with full snapshot details. Build verification passes.",
          "updated_at": "2026-02-14T04:37:40.981012+00:00"
        },
        {
          "id": "subtask-4-5",
          "description": "Update logs.ts - mode-aware rendering (Advanced shows verbose logs)",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/logs.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/logs.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: Added mode-aware rendering to logs.ts - Basic mode shows simplified logs (hide subsystem column), Advanced mode shows verbose logs (show subsystem column). Added mode property to LogsProps type, updated renderLogs to conditionally show subsystem based on mode, and passed mode prop from app-render.ts. Build verification passes. Commit successful.",
          "updated_at": "2026-02-14T04:41:40.927851+00:00"
        },
        {
          "id": "subtask-4-6",
          "description": "Update debug.ts - Advanced mode only view with full functionality",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/views/debug.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/views/debug.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Completed: debug.ts already has full Advanced mode implementation with Snapshots, Manual RPC, Models, and Event Log sections. Build verification passes.",
          "updated_at": "2026-02-14T04:43:13.402183+00:00"
        }
      ]
    },
    {
      "id": "phase-5-design-system",
      "name": "Design System Enhancement",
      "type": "implementation",
      "description": "Enhance base.css with AI SDK-inspired design tokens for consistent styling across all views",
      "depends_on": [
        "phase-1-core-infrastructure"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-5-1",
          "description": "Add AI SDK-inspired color tokens to base.css for consistent accent styling",
          "service": "ui",
          "files_to_modify": [
            "ui/src/styles/base.css"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/styles/base.css"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Added AI SDK-inspired color tokens to base.css for consistent accent styling. Added violet color palette with --ai*, --streaming, and related tokens for both dark and light themes.",
          "updated_at": "2026-02-14T04:45:31.865295+00:00"
        },
        {
          "id": "subtask-5-2",
          "description": "Add consistent spacing and typography tokens inspired by AI SDK patterns",
          "service": "ui",
          "files_to_modify": [
            "ui/src/styles/base.css"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/styles/base.css"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
            "expected": "Build succeeds"
          },
          "status": "completed",
          "notes": "Added spacing tokens (--space-1 through --space-20), typography size tokens (--text-xs through --text-4xl), and line height tokens (--leading-tight, --leading-normal, --leading-relaxed) to both dark and light themes. Build verification passed.",
          "updated_at": "2026-02-14T04:47:35.469878+00:00"
        }
      ]
    },
    {
      "id": "phase-6-testing",
      "name": "Testing - Mode Functionality",
      "type": "implementation",
      "description": "Add unit and integration tests for mode toggle functionality",
      "depends_on": [
        "phase-4-views-advanced",
        "phase-5-design-system"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-6-1",
          "description": "Add unit tests for mode state changes and localStorage persistence",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/app.test.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/app-settings.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm test",
            "expected": "All tests pass"
          },
          "status": "pending"
        },
        {
          "id": "subtask-6-2",
          "description": "Add navigation tests for Basic/Advanced mode filtering",
          "service": "ui",
          "files_to_modify": [
            "ui/src/ui/navigation.test.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "ui/src/ui/navigation.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm test",
            "expected": "All tests pass"
          },
          "status": "pending"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 6,
    "total_subtasks": 18,
    "services_involved": [
      "ui"
    ],
    "parallelism": {
      "max_parallel_phases": 3,
      "parallel_groups": [
        {
          "phases": [
            "phase-3-views-basic",
            "phase-4-views-advanced",
            "phase-5-design-system"
          ],
          "reason": "All depend on phase-1 and phase-2, different view files modified"
        }
      ],
      "recommended_workers": 2,
      "speedup_estimate": "1.4x faster than sequential"
    },
    "startup_command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run dev"
  },
  "verification_strategy": {
    "risk_level": "high",
    "skip_validation": false,
    "test_creation_phase": "post_implementation",
    "test_types_required": [
      "unit",
      "integration"
    ],
    "security_scanning_required": false,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "All existing tests pass",
      "New code has test coverage for mode toggle",
      "Build succeeds without errors",
      "Mode toggle persists in localStorage",
      "Basic mode shows simplified views",
      "Advanced mode shows full functionality",
      "Debug view only accessible in Advanced mode"
    ],
    "verification_steps": [
      {
        "name": "Build",
        "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm run build",
        "expected_outcome": "Build succeeds without errors",
        "type": "build",
        "required": true,
        "blocking": true
      },
      {
        "name": "Unit Tests",
        "command": "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm test",
        "expected_outcome": "All existing tests pass",
        "type": "test",
        "required": true,
        "blocking": true
      }
    ],
    "reasoning": "High risk UI change requires build verification and unit test coverage. No security scanning needed as this is UI-only with no external API changes."
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": true,
      "commands": [
        "cd /Users/jkneen/Documents/GitHub/atomicbot/ui && npm test"
      ],
      "minimum_coverage": "Mode toggle state, navigation filtering"
    },
    "integration_tests": {
      "required": false,
      "commands": [],
      "services_to_test": []
    },
    "e2e_tests": {
      "required": false,
      "commands": [],
      "flows": []
    },
    "browser_verification": {
      "required": true,
      "pages": [
        {
          "url": "http://localhost:3000/",
          "checks": [
            "Mode toggle renders",
            "Basic mode shows simplified view",
            "Advanced mode shows all tabs"
          ]
        },
        {
          "url": "http://localhost:3000/#debug",
          "checks": [
            "In Basic mode: redirects to overview",
            "In Advanced mode: debug view renders"
          ]
        }
      ]
    },
    "database_verification": {
      "required": false,
      "checks": []
    }
  },
  "qa_signoff": null,
  "created_at": "2026-02-14T03:11:37.126Z",
  "updated_at": "2026-02-14T06:09:51.651Z",
  "status": "human_review",
  "planStatus": "review",
  "xstateState": "human_review",
  "executionPhase": "complete",
  "lastEvent": {
    "eventId": "7fb3e9be-bfb9-45a4-a542-4afb2293d8c9",
    "sequence": 0,
    "type": "PLANNING_COMPLETE",
    "timestamp": "2026-02-14T03:33:51.630682+00:00"
  },
  "last_updated": "2026-02-14T04:47:35.469886+00:00",
  "reviewReason": "stopped"
}