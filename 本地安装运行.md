构建产物在 `dist/control-ui/`，可以用两种方式看到效果：

---

## 1. 通过 Gateway（推荐，功能完整）

Control UI 由 **Gateway 提供**，并连到同一端口的 WebSocket。先起网关，再在浏览器打开对应地址即可：

```bash
# 在项目根目录
pnpm gateway:dev
```

**重要**：`gateway:dev` 使用 **dev profile**，默认端口是 **19001**（不是 18789）。在浏览器打开：

- **http://127.0.0.1:19001/**

若终端里打印了 `listening on ws://127.0.0.1:xxxxx`，请用该端口访问 `http://127.0.0.1:xxxxx/`。

此时 Gateway 会从 `dist/control-ui` 提供你刚构建的 UI。若你修改过 `ui/` 下源码，需重新执行 **`pnpm ui:build`** 并强制刷新浏览器（Ctrl+Shift+R / Cmd+Shift+R）才能看到最新界面。

**若界面报错 "unauthorized: gateway token missing"**：需要先提供网关 token，任选其一：

1. **推荐**：在**新开一个终端**（gateway:dev 保持运行），在项目根目录执行：

   ```bash
   pnpm openclaw --dev dashboard
   ```

   会打印并复制一条带 token 的 Dashboard URL（形如 `http://127.0.0.1:19001/#token=...`）。在浏览器中打开该链接，Control UI 会自动带上 token 并连接。

2. **手动填 token**：从 dev 配置里查看 token（`gateway.auth.token`），在 Control UI 里打开设置，把 token 粘贴到认证字段后保存并重连。
   - dev 配置路径：`~/.openclaw-dev/openclaw.json`

> 非 dev 模式（如 `openclaw gateway run`）默认端口为 18789。

---

## 2. 仅预览静态构建（不连网关）

只想确认页面能打开、不连后端时，可以用 Vite 的 preview：

```bash
cd ui && npm run preview
```

再打开终端里给出的地址（一般是 http://localhost:4173）。  
这种方式只提供静态资源，若要选网关、聊天等，需要在页面里填 Gateway WebSocket 地址（dev 为 `ws://127.0.0.1:19001`，默认生产为 `ws://127.0.0.1:18789`），或改用方式 1。

---

**总结**：要“看到完整效果”，用 **`pnpm gateway:dev`**，再访问 **http://127.0.0.1:19001/** 即可。

---

## 3. 在已运行的 OpenClaw 上安装第三方 skill（以 backlink-pilot 为例）

适用于 **OpenClaw UI 与 daemon 已在运行**，只需增加某个 skill、不涉及重新安装 OpenClaw 的场景。技能目录支持热重载：新增或修改后下次对话自动生效，无需重启。

1. **克隆并安装依赖**（在任意目录执行）：

   ```bash
   git clone https://github.com/s87343472/backlink-pilot.git && cd backlink-pilot
   npm install
   ```

   首次 `npm install` 会下载 Chromium（约 150MB），国内可能需要代理。

2. **挂到 OpenClaw 的 skills 目录**：

   ```bash
   mkdir -p ~/.openclaw/skills
   ln -s "$(pwd)" ~/.openclaw/skills/backlink-pilot
   ```

   若当前目录不是 backlink-pilot 根目录，将 `"$(pwd)"` 换成 backlink-pilot 的绝对路径。若使用 `OPENCLAW_STATE_DIR`，则 skills 目录为 `$OPENCLAW_STATE_DIR/skills`，软链目标改为该路径下的 `backlink-pilot`。

3. **使 daemon 加载新 skill**：**无需重启**。将技能放入 `~/.openclaw/skills` 后，下一轮与 Agent 对话即会使用新技能（默认开启 `skills.load.watch`）。若新技能未出现，可尝试重启 gateway 作为排障步骤。

4. **（可选）配置产品信息**：在 backlink-pilot 目录执行 `cp config.example.yaml config.yaml`，编辑 `config.yaml` 填写 product、credentials 等。该文件含敏感信息，已被 .gitignore，不会提交到 git。

5. **验证**：在 Control UI 或已连接会话中与 Agent 对话，例如「帮我提交到 submitaitools」或「看看某目录站能不能自动提交」；也可在 backlink-pilot 目录直接运行 `node src/cli.js scout ...` / `node src/cli.js submit ...`（详见 [backlink-pilot 仓库](https://github.com/s87343472/backlink-pilot)）。
